(self.webpackChunkmetadata_generator_vjs=self.webpackChunkmetadata_generator_vjs||[]).push([[607],{1822:(e,t,a)=>{(t=a(3645)(!1)).push([e.id,"\ndiv.xml-content[data-v-5c60f94f] {\n background:rgb(246, 248, 250);\n border: 1px dotted lightgrey;\n margin: 5px 0;\n}\n",""]),e.exports=t},607:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var i=a(5572),n=a(5582),r=a.n(n);const d={name:"IsoGenerator",components:{ViewXml:i.Z},props:{metadata:{type:Object,default:function(){}}},data:function(){return{xmlDoc:null,codeLists:{language:"http://www.loc.gov/standards/iso639-2/",charset:"http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#MD_CharacterSetCode",scope:"http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#MD_ScopeCode",role:"http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#CI_RoleCode",dateType:"http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#CI_DateTypeCode",progress:"http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#MD_ProgressCode",maintenance:"http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#MD_MaintenanceFrequencyCode",keywordType:"http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#MD_KeywordTypeCode",spatialRepresentation:"http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#MD_SpatialRepresentationTypeCode",link:"http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#CI_OnLineFunctionCode"}}},watch:{metadata:{handler:function(e){console.log("META CHANGE"),this.createISO19139()},deep:!0}},created:function(){this.createISO19139()},methods:{exportXML:function(){var e=(new XMLSerializer).serializeToString(this.xmlDoc),t=new Blob([e],{type:"application/xml"}),a="metadata-iso19139."+r()().format("YYYYMMDD")+".xml",i=document.createElement("a");i.setAttribute("href",window.URL.createObjectURL(t)),i.setAttribute("download",a),i.click(),i.remove()},createISO19139:function(){var e=this,t=new DOMParser;this.xmlDoc=t.parseFromString('<gmd:MD_Metadata xmlns:gmd="http://www.isotc211.org/2005/gmd" xmlns:gco="http://www.isotc211.org/2005/gco" xmlns:gmx="http://www.isotc211.org/2005/gmx" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns:xlink="http://www.w3.org/1999/xlink" xsi:schemaLocation="http://www.isotc211.org/2005/gmd http://schemas.opengis.net/csw/2.0.2/profiles/apiso/1.0.0/apiso.xsd"></gmd:MD_Metadata>',"text/xml");var a=this.xmlDoc.createElement("gmd:fileIdentifier"),i=this.createNode("gco:CharacterString",this.metadata.uuid);a.appendChild(i),this.xmlDoc.documentElement.appendChild(a);var n=this.xmlDoc.createElement("gmd:language");n.appendChild(this.createNodeCode("gmd:LanguageCode","language","fr"===this.metadata.mainLang?"fre":"eng","")),this.xmlDoc.documentElement.appendChild(n);var d=this.xmlDoc.createElement("gmd:characterSet");d.appendChild(this.createNodeCode("gmd:MD_CharacterSetCode","charset","utf8","")),this.xmlDoc.documentElement.appendChild(d);var s=this.xmlDoc.createElement("gmd:hierarchyLevel");s.appendChild(this.createNodeCode("gmd:MD_ScopeCode","scope","series","series")),this.xmlDoc.documentElement.appendChild(s);var o=this.xmlDoc.createElement("gmd:contact"),l=this.createContact(this.metadata.metaContact);o.appendChild(l),this.xmlDoc.documentElement.appendChild(o);var c=this.xmlDoc.createElement("gmd:dateStamp"),m=new Date,h=this.createNode("gco:DateTime",r().utc(m).format());c.appendChild(h),this.xmlDoc.documentElement.appendChild(c);var p=this.xmlDoc.createElement("gmd:metadataStandardName");if(i=this.createNode("gco:CharacterString","ISO 19115:3/19139"),p.appendChild(i),this.xmlDoc.documentElement.appendChild(p),p=this.xmlDoc.createElement("gmd:metadataStandardVersion"),i=this.createNode("gco:CharacterString","1.0"),p.appendChild(i),this.xmlDoc.documentElement.appendChild(p),this.metadata.langs.length>1){var g=this.xmlDoc.createElement("gmd:locale");this.metadata.langs.forEach((function(t){var a=e.xmlDoc.createElement("gmd:PT_Locale");a.setAttribute("id",t.toUpperCase());var i=e.xmlDoc.createElement("gmd:languageCode");i.appendChild(e.createNodeCode("gmd:LanguageCode","language","fr"===t?"fre":"eng",null)),a.appendChild(i);var n=e.xmlDoc.createElement("gmd:characterEncoding");n.appendChild(e.createNodeCode("gmd:MD_CharacterSetCode","charset","utf8",null)),a.appendChild(n),g.appendChild(a)})),this.xmlDoc.documentElement.appendChild(g)}var u=this.xmlDoc.createElement("gmd:referenceSystemInfo"),C=this.xmlDoc.createElement("gmd:MD_ReferenceSystem");u.appendChild(C);var x=this.xmlDoc.createElement("gmd:referenceSystemIdentifier");C.appendChild(x),a=this.xmlDoc.createElement("gmd:RS_Identifier"),x.appendChild(a),i=this.createIncludeString("gmd:code","WGS 1984",null,this.metadata.mainLang,this.metadata.langs),a.appendChild(i),this.xmlDoc.documentElement.appendChild(u)},createNode:function(e,t){var a=this.xmlDoc.createElement(e);return a.appendChild(this.xmlDoc.createTextNode(t)),a},createNodeCode:function(e,t,a,i){if(i)var n=this.createNode(e,i);else n=this.xmlDoc.createElement(e);return n.setAttribute("codeList",this.codeLists[t]),n.setAttribute("codeListValue",a),n},createContact:function(e){var t=this.xmlDoc.createElement("gmd:CI_ResponsibleParty");if("Personal"===e.nameType){var a=this.createIncludeString("gmd:individualName",e.fullName,e.identifier,this.metadata.mainLang,this.metadata.langs);t.appendChild(a)}var i=this.xmlDoc.createElement("gmd:organisationName");if(t.appendChild(i),"Organizational"===e.nameType)var n={name:e.fullName,identifier:e.identifier};else e.affiliation&&(n=affiliation);n&&(i=this.createIncludeString("gmd:organisationName",n.name,n.identifier,this.metadata.mainLang,this.metadata.langs),t.appendChild(i));var r=this.xmlDoc.createElement("gmd:contactInfo"),d=this.xmlDoc.createElement("gmd:CI_Contact");r.appendChild(d);var s=this.xmlDoc.createElement("gmd:phone");d.appendChild(s);var o=this.xmlDoc.createElement("gmd:CI_Telephone");s.appendChild(o),o.appendChild(this.createNeededString("gmd:voice",null)),o.appendChild(this.createNeededString("gmd:facsimile",null));var l=this.xmlDoc.createElement("gmd:address");d.appendChild(l);var c=this.xmlDoc.createElement("gmd:CI_Address");l.appendChild(c),c.appendChild(this.createNeededString("gmd:deliveryPoint",null)),c.appendChild(this.createNeededString("gmd:city",null)),c.appendChild(this.createNeededString("gmd:administrativeArea",null)),c.appendChild(this.createNeededString("gmd:postalCode",null)),c.appendChild(this.createNeededString("gmd:country",null)),c.appendChild(this.createIncludeString("gmd:electronicMailAddress",e.email,null,this.metadata.mainLang,this.metadata.langs)),t.appendChild(r);var m=this.xmlDoc.createElement("gmd:role");return m.appendChild(this.createNodeCode("gmd:CI_RoleCode","role",e.role,"")),t.appendChild(m),t},createNeededString:function(e,t){var a=this.xmlDoc.createElement(e);return t?a.appendChild(this.createNode("gco:CharacterString",t)):(a.setAttribute("gco:nilReason","missing"),a.appendChild(this.xmlDoc.createElement("gco:CharacterString"))),a},createIncludeString:function(e,t,a,i,n){var r,d=this.xmlDoc.createElement(e);if(r="string"==typeof t?{fr:t,en:t}:t,a){var s=this.createNode("gmx:Anchor",r[i]);if("string"==typeof a)s.setAttribute("xlink:href",a);else if(a.identifier)switch(a.type){case"ORCID":s.setAttribute("xlink:href","https://orcid.org/"+a.identifier);break;case"ISNI":s.setAttribute("xlink:href","https://www.isni.org/"+a.identifier);break;case"ROR":s.setAttribute("xlink:href","https://ror.org/"+a.identifier)}else s=this.createNode("gco:CharacterString",r[i])}else s=this.createNode("gco:CharacterString",r[i]);if(d.appendChild(s),n.length>1){d.setAttribute("xsi:type","gmd:PT_FreeText_PropertyType");var o=this.xmlDoc.createElement("gmd:PT_FreeText"),l=this;n.forEach((function(e){var t=l.xmlDoc.createElement("gmd:textGroup"),a=l.createNode("gmd:LocalisedCharacterString",r[e]);a.setAttribute("locale","#"+e.toUpperCase()),t.appendChild(a),o.appendChild(t)})),d.appendChild(o)}return d},generateSubject:function(e){var t=[],a=this.metadata.langs;e.thesaurus&&(a=this.metadata.langs.filter((function(t){return e.thesaurus.langs.includes(t)})));var i=this;return a.forEach((function(a){if(e.title[a]){var n=i.createNode("subject",e.title[a]);n.setAttribute("xml:lang",a),e.thesaurus&&e.code&&(n.setAttribute("subjectScheme",e.thesaurus.name),n.setAttribute("schemeURI",e.thesaurus.schemeUrl),n.setAttribute("valueURI",e.thesaurus.valueRoot+e.code),n.setAttribute("classificationCode",e.code)),t.push(n)}})),t}}};a(7457);const s=(0,a(1900).Z)(d,(function(){var e=this,t=e._self._c;return t("span",[t("div",{staticClass:"header"},[t("h3",{staticStyle:{"margin-top":"0"}},[e._v("Format ISO19139")]),e._v(" "),e._m(0),e._v(" "),t("div",[e._v("\n      Fiche Générée "),t("input",{attrs:{type:"button",value:"Exporter"},on:{click:e.exportXML}})])]),e._v(" "),t("div",{staticClass:"xml-content"},[e.xmlDoc?t("view-xml",{attrs:{element:e.xmlDoc.documentElement,deployed:!1,depth:0}}):e._e()],1)])}),[function(){var e=this,t=e._self._c;return t("div",[e._v("\n    Pour plus d'information consultez la documentation \n    sur: \n    "),t("ul",{staticStyle:{margin:"5px 0 10px 0"}},[t("li",[t("a",{attrs:{href:"http://cnig.gouv.fr/wp-content/uploads/2019/05/Guide-de-saisie-des-%C3%A9l%C3%A9ments-de-m%C3%A9tadonn%C3%A9es-INSPIRE-v2.0.pdf",target:"_blank"}},[e._v("\n\t\t     Guide de saisie des métadonnées INSPIRE (CNIG)\n\t\t     ")])]),e._v(" "),t("li",[e._v("\n         ou "),t("a",{attrs:{href:"https://github.com/INSPIRE-MIF/technical-guidelines/blob/2022.1/metadata/metadata-iso19139/metadata-iso19139.adoc",target:"_blank"}},[e._v("\n         Technical Guidance for implementation of INSPIRE dataset and service metadata based on ISO/TS 19139:2007\n         ")])])])])}],!1,null,"5c60f94f",null).exports},7457:(e,t,a)=>{var i=a(1822);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals),(0,a(5346).Z)("5e1cda34",i,!0,{})}}]);
//# sourceMappingURL=607.metadata-generator-vjs.js.map