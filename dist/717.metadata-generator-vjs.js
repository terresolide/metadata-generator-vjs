(self.webpackChunkmetadata_generator_vjs=self.webpackChunkmetadata_generator_vjs||[]).push([[717],{9133:(e,t,i)=>{(t=i(3645)(!1)).push([e.id,"\ndiv.xml-content[data-v-a43430c4] {\n background:rgb(246, 248, 250);\n border: 1px dotted lightgrey;\n margin: 5px 0;\n}\n",""]),e.exports=t},7717:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>d});var a=i(1266),n=i.n(a),r=i(5582),s=i.n(r);const o={name:"IsoGenerator",components:{ViewXml:n()},props:{metadata:{type:Object,default:function(){}}},data:function(){return{xmlDoc:null}},watch:{metadata:{handler:function(e){console.log("META CHANGE"),this.createISO19139()},deep:!0}},created:function(){this.createISO19139()},methods:{exportXML:function(){var e=(new XMLSerializer).serializeToString(this.xmlDoc),t=new Blob([e],{type:"application/xml"}),i="metadata-iso19139."+s()().format("YYYYMMDD")+".xml",a=document.createElement("a");a.setAttribute("href",window.URL.createObjectURL(t)),a.setAttribute("download",i),a.click(),a.remove()},createISO19139:function(){console.log("create");var e=this,t=new DOMParser;this.xmlDoc=t.parseFromString('<gmd:MD_Metadata xmlns:gmd="http://www.isotc211.org/2005/gmd" xmlns:gco="http://www.isotc211.org/2005/gco" xmlns:gmx="http://www.isotc211.org/2005/gmx" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns:xlink="http://www.w3.org/1999/xlink" xsi:schemaLocation="http://www.isotc211.org/2005/gmd http://schemas.opengis.net/csw/2.0.2/profiles/apiso/1.0.0/apiso.xsd"></gmd:MD_Metadata>',"text/xml");var i=this.xmlDoc.createElement("gmd:fileIdentifier"),a=this.createNode("gco:CharacterString","----METADATA-IDENTIFIER--------");i.appendChild(a),this.xmlDoc.documentElement.appendChild(i);var n=this.xmlDoc.createElement("gmd:language");(a=this.createNode("gmd:LanguageCode","")).setAttribute("codeList","http://www.loc.gov/standards/iso639-2/"),a.setAttribute("codeListValue","fr"===this.metadata.mainLang?"fre":"eng"),n.appendChild(a),this.xmlDoc.documentElement.appendChild(n);var r=this.xmlDoc.createElement("gmd:characterSet");(a=this.createNode("gmd:MD_CharacterSetCode","")).setAttribute("codeList","http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#MD_CharacterSetCode"),a.setAttribute("codeListValue","utf8"),this.xmlDoc.documentElement.appendChild(r),n=this.xmlDoc.createElement("gmd:hierarchyLevel"),(a=this.createNode("gmd:MD_ScopeCode","series")).setAttribute("codeList","http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#MD_ScopeCode"),a.setAttribute("codeListValue","series"),n.appendChild(a),this.xmlDoc.documentElement.appendChild(n);var o=this.xmlDoc.createElement("gmd:contact"),d=this.createContact(this.metadata.metaContact),c=this.xmlDoc.createElement("gmd:dateStamp"),l=new Date,m=this.createNode("gco:DateTime",s().utc(l).format());c.appendChild(m),this.xmlDoc.documentElement.appendChild(c);var h=this.xmlDoc.createElement("gmd:metadataStandardName");if(a=this.createNode("gco:CharacterString","ISO 19115:3/19139"),h.appendChild(a),this.xmlDoc.documentElement.appendChild(h),h=this.xmlDoc.createElement("gmd:metadataStandardVersion"),a=this.createNode("gco:CharacterString","1.0"),h.appendChild(a),this.xmlDoc.documentElement.appendChild(h),this.metadata.langs.length>1){var p=this.xmlDoc.createElement("gmd:locale");this.metadata.langs.forEach((function(t){var i=e.xmlDoc.createElement("gmd:PT_Locale");i.setAttribute("id",t.toUpperCase());var a=e.xmlDoc.createElement("gmd:languageCode");i.appendChild(a);var n=e.xmlDoc.createElement("gmd:characterEncoding");i.appendChild(n),p.appendChild(i)})),this.xmlDoc.documentElement.appendChild(p)}o.appendChild(d),this.xmlDoc.documentElement.appendChild(o)},createNode:function(e,t){var i=this.xmlDoc.createElement(e);return i.appendChild(this.xmlDoc.createTextNode(t)),i},createContact:function(e){var t=this.xmlDoc.createElement("gmd:CI_ResponsibleParty");"Personal"===e.nameType&&this.xmlDoc.createElement("gmd:individualName");var i=this.xmlDoc.createElement("gmd:organisationName");if(t.appendChild(i),"Organizational"===e.nameType&&e.identifier&&e.identifier.identifier){var a=this.createNode("gmx:Anchor",e.fullName);switch(e.identifier.type){case"ORCID":a.setAttribute("xlink:href","https://orcid.org/"+e.identifier.identifier);break;case"ISNI":a.setAttribute("xlink:href","https://www.isni.org/"+e.identifier.identifier);break;case"ROR":a.setAttribute("xlink:href","https://ror.org/"+e.identifier.identifier)}}else a=this.createNode("gco:CharacterString",this.metadata.metaContact.fullName);return i.appendChild(a),t},generateContact:function(e,t){if(t.length>0&&("creator"===e||"contributor"===e)){var i=this.xmlDoc.createElement(e+"s");this.xmlDoc.documentElement.appendChild(i);var a=this;t.forEach((function(t){var n=a.xmlDoc.createElement(e);if(t.type&&n.setAttribute("contributorType",t.type),t.fullName){var r=a.xmlDoc.createElement(e+"Name");if(r.appendChild(a.xmlDoc.createTextNode(t.fullName)),n.appendChild(r),i.appendChild(n),"publisher"!==e&&r.setAttribute("nameType",t.nameType),t.givenName&&n.appendChild(a.createNode("givenName",t.givenName)),t.familyName&&n.appendChild(a.createNode("familyName",t.familyName)),t.identifier&&t.identifier.identifier){var s=a.createNode("nameIdentifier",t.identifier.identifier);switch(s.setAttribute("nameIdentifierScheme",t.identifier.type),t.identifier.type){case"ORCID":s.setAttribute("schemeURI","https://orcid.org/");break;case"ISNI":s.setAttribute("shemeURI","https://www.isni.org/");break;case"ROR":s.setAttribute("shemeURI","https://ror.org/");break;case"GRID":s.setAttribute("shemeURI","https://www.grid.ac/")}n.appendChild(s)}t.affiliations.forEach((function(e){if(e.name){var t=a.createNode("affiliation",e.name);if(e.identifier&&e.identifier.identifier)switch(t.setAttribute("affiliationIdentifierScheme",e.identifier.type),e.identifier.type){case"ORCID":t.setAttribute("affiliationIdentifier","https://orcid.org/"+e.identifier.identifier);break;case"ISNI":t.setAttribute("affiliationIdentifier","https://www.isni.org/"+e.identifier.identifier);break;case"ROR":t.setAttribute("affiliationIdentifier","https://ror.org/"+e.identifier.identifier);break;case"GRID":t.setAttribute("affiliationIdentifier",e.identifier.identifier)}n.appendChild(t)}}))}}))}},generateSubject:function(e){var t=[],i=this.metadata.langs;e.thesaurus&&(i=this.metadata.langs.filter((function(t){return e.thesaurus.langs.includes(t)})));var a=this;return i.forEach((function(i){if(e.title[i]){var n=a.createNode("subject",e.title[i]);n.setAttribute("xml:lang",i),e.thesaurus&&e.code&&(n.setAttribute("subjectScheme",e.thesaurus.name),n.setAttribute("schemeURI",e.thesaurus.schemeUrl),n.setAttribute("valueURI",e.thesaurus.valueRoot+e.code),n.setAttribute("classificationCode",e.code)),t.push(n)}})),t}}};i(3473);const d=(0,i(1900).Z)(o,(function(){var e=this,t=e._self._c;return t("span",[t("div",{staticClass:"header"},[t("h3",{staticStyle:{"margin-top":"0"}},[e._v("Format ISO19139")]),e._v(" "),e._m(0),e._v(" "),t("div",[e._v("\n      Fiche Générée "),t("input",{attrs:{type:"button",value:"Exporter"},on:{click:e.exportXML}})])]),e._v(" "),t("div",{staticClass:"xml-content"},[e.xmlDoc?t("view-xml",{attrs:{element:e.xmlDoc.documentElement}}):e._e()],1)])}),[function(){var e=this,t=e._self._c;return t("div",[e._v("\n    Pour plus d'information consultez la documentation \n    sur: \n    "),t("ul",{staticStyle:{margin:"5px 0 10px 0"}},[t("li",[t("a",{attrs:{href:"http://cnig.gouv.fr/wp-content/uploads/2019/05/Guide-de-saisie-des-%C3%A9l%C3%A9ments-de-m%C3%A9tadonn%C3%A9es-INSPIRE-v2.0.pdf",target:"_blank"}},[e._v("\n\t\t     Guide de saisie des métadonnées INSPIRE (CNIG)\n\t\t     ")])]),e._v(" "),t("li",[e._v("\n         ou "),t("a",{attrs:{href:"https://github.com/INSPIRE-MIF/technical-guidelines/blob/2022.1/metadata/metadata-iso19139/metadata-iso19139.adoc",target:"_blank"}},[e._v("\n         Technical Guidance for implementation of INSPIRE dataset and service metadata based on ISO/TS 19139:2007\n         ")])])])])}],!1,null,"a43430c4",null).exports},3473:(e,t,i)=>{var a=i(9133);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals),(0,i(5346).Z)("80500e1e",a,!0,{})}}]);
//# sourceMappingURL=717.metadata-generator-vjs.js.map