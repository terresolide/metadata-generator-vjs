(self.webpackChunkmetadata_generator_vjs=self.webpackChunkmetadata_generator_vjs||[]).push([[872],{7030:(e,t,a)=>{(t=a(3645)(!1)).push([e.id,"\ndiv.xml-content[data-v-b4075760] {\n background:rgb(246, 248, 250);\n border: 1px dotted lightgrey;\n margin: 5px 0;\n}\n",""]),e.exports=t},7872:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var i=a(9629),n=a(5582),d=a.n(n);const r={name:"IsoGenerator",components:{ViewXml:i.Z},props:{metadata:{type:Object,default:function(){}}},data:function(){return{xmlDoc:null,codeLists:{language:"http://www.loc.gov/standards/iso639-2/",charset:"http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#MD_CharacterSetCode",scope:"http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#MD_ScopeCode",role:"http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#CI_RoleCode",dateType:"http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#CI_DateTypeCode",progress:"http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#MD_ProgressCode",maintenance:"http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#MD_MaintenanceFrequencyCode",keywordType:"http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#MD_KeywordTypeCode",spatialRepresentation:"http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#MD_SpatialRepresentationTypeCode",link:"http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#CI_OnLineFunctionCode"}}},watch:{metadata:{handler:function(e){console.log("META CHANGE"),this.createISO19139()},deep:!0}},created:function(){this.createISO19139()},methods:{exportXML:function(){var e=(new XMLSerializer).serializeToString(this.xmlDoc),t=new Blob([e],{type:"application/xml"}),a="metadata-iso19139."+d()().format("YYYYMMDD")+".xml",i=document.createElement("a");i.setAttribute("href",window.URL.createObjectURL(t)),i.setAttribute("download",a),i.click(),i.remove()},createISO19139:function(){var e=this,t=new DOMParser;this.xmlDoc=t.parseFromString('<gmd:MD_Metadata xmlns:gmd="http://www.isotc211.org/2005/gmd" xmlns:gco="http://www.isotc211.org/2005/gco" xmlns:gmx="http://www.isotc211.org/2005/gmx" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns:xlink="http://www.w3.org/1999/xlink" xsi:schemaLocation="http://www.isotc211.org/2005/gmd http://schemas.opengis.net/csw/2.0.2/profiles/apiso/1.0.0/apiso.xsd"></gmd:MD_Metadata>',"text/xml");var a=this.xmlDoc.createElement("gmd:fileIdentifier"),i=this.createNode("gco:CharacterString",this.metadata.uuid);a.appendChild(i),this.xmlDoc.documentElement.appendChild(a);var n=this.xmlDoc.createElement("gmd:language");n.appendChild(this.createNodeCode("gmd:LanguageCode","language","fr"===this.metadata.mainLang?"fre":"eng","")),this.xmlDoc.documentElement.appendChild(n);var r=this.xmlDoc.createElement("gmd:characterSet");r.appendChild(this.createNodeCode("gmd:MD_CharacterSetCode","charset","utf8","")),this.xmlDoc.documentElement.appendChild(r);var s=this.xmlDoc.createElement("gmd:hierarchyLevel");s.appendChild(this.createNodeCode("gmd:MD_ScopeCode","scope","series","series")),this.xmlDoc.documentElement.appendChild(s);var o=this.xmlDoc.createElement("gmd:contact"),l=this.createContact(this.metadata.metaContact);o.appendChild(l),this.xmlDoc.documentElement.appendChild(o);var c=this.xmlDoc.createElement("gmd:dateStamp"),m=new Date,h=this.createNode("gco:DateTime",d().utc(m).format());c.appendChild(h),this.xmlDoc.documentElement.appendChild(c);var p=this.xmlDoc.createElement("gmd:metadataStandardName");if(i=this.createNode("gco:CharacterString","ISO 19115:3/19139"),p.appendChild(i),this.xmlDoc.documentElement.appendChild(p),p=this.xmlDoc.createElement("gmd:metadataStandardVersion"),i=this.createNode("gco:CharacterString","1.0"),p.appendChild(i),this.xmlDoc.documentElement.appendChild(p),this.metadata.langs.length>1){var g=this.xmlDoc.createElement("gmd:locale");this.metadata.langs.forEach((function(t){var a=e.xmlDoc.createElement("gmd:PT_Locale");a.setAttribute("id",t.toUpperCase());var i=e.xmlDoc.createElement("gmd:languageCode");i.appendChild(e.createNodeCode("gmd:LanguageCode","language","fr"===t?"fre":"eng",null)),a.appendChild(i);var n=e.xmlDoc.createElement("gmd:characterEncoding");n.appendChild(e.createNodeCode("gmd:MD_CharacterSetCode","charset","utf8",null)),a.appendChild(n),g.appendChild(a)})),this.xmlDoc.documentElement.appendChild(g)}var u=this.xmlDoc.createElement("gmd:referenceSystemInfo"),C=this.xmlDoc.createElement("gmd:MD_ReferenceSystem");u.appendChild(C);var f=this.xmlDoc.createElement("gmd:referenceSystemIdentifier");C.appendChild(f),a=this.xmlDoc.createElement("gmd:RS_Identifier"),f.appendChild(a),i=this.createIncludeString("gmd:code",this.metadata.referentiel.name,this.metadata.referentiel.link,this.metadata.mainLang,this.metadata.langs),a.appendChild(i),this.xmlDoc.documentElement.appendChild(u),this.xmlDoc.documentElement.appendChild(this.createDataIdentification())},createNode:function(e,t){var a=this.xmlDoc.createElement(e);return a.appendChild(this.xmlDoc.createTextNode(t)),a},createDataIdentification:function(){var e=this,t=this.xmlDoc.createElement("gmd:identificationInfo"),a=this.xmlDoc.createElement("gmd:MD_DataIdentification");t.appendChild(a);var i=this.xmlDoc.createElement("gmd:citation");a.appendChild(i);var n=this.xmlDoc.createElement("gmd:CI_Citation");i.appendChild(n),this.metadata.title[this.metadata.mainLang]&&n.appendChild(this.createIncludeString("gmd:title",this.metadata.title,null,this.metadata.mainLang,this.metadata.langs));var d=this.metadata.dates.filter((function(e){return"Created"===e.type}));d.sort((function(e,t){return e.date>t.date?-1:1})),d[0]&&d[0].date&&n.appendChild(this.createDate(d[0].date,"creation")),this.metadata.publicationDate&&n.appendChild(this.createDate(this.metadata.publicationDate,"publication"));var r=this.metadata.dates.filter((function(e){return"Updated"===e.type}));r.sort((function(e,t){return e.date>t.date?-1:1})),r[0]&&r[0].date&&n.appendChild(this.createDate(r[0].date,"revision")),this.metadata.doi&&n.appendChild(this.createIdentifier("https://www.doi.org/"+this.metadata.doi)),this.metadata.identifiers.forEach((function(t){n.appendChild(e.createIdentifier(t.identifier))})),this.metadata.descriptions.Abstract[this.metadata.mainLang]&&a.appendChild(this.createIncludeString("gmd:abstract",this.metadata.descriptions.Abstract,null,this.metadata.mainLang,this.metadata.langs));var s=this.xmlDoc.createElement("gmd:status");if(s.appendChild(this.createNodeCode("gmd:MD_ProgressCode","progress",this.metadata.status)),a.appendChild(s),this.metadata.publisher.fullName){var o=this.xmlDoc.createElement("gmd:pointOfContact");o.appendChild(this.createContact(this.metadata.publisher)),a.appendChild(o)}this.metadata.creators.forEach((function(t){if(t.fullName){var i=e.xmlDoc.createElement("gmd:pointOfContact");i.appendChild(e.createContact(t)),a.appendChild(i)}})),this.metadata.contributors.forEach((function(t){if(t.fullName){var i=e.xmlDoc.createElement("gmd:pointOfContact");i.appendChild(e.createContact(t)),a.appendChild(i)}}));var l=this.xmlDoc.createElement("gmd:resourceMaintenance"),c=this.xmlDoc.createElement("gmd:MD_MaintenanceInformation");l.appendChild(c);var m=this.xmlDoc.createElement("gmd:maintenanceAndUpdateFrequency");c.appendChild(m),m.appendChild(this.createNodeCode("gmd:MD_MaintenanceFrequencyCode","maintenance",this.metadata.maintenance)),a.appendChild(l);var h=this.xmlDoc.createElement("gmd:spatialRepresentationType");h.appendChild(this.createNodeCode("gmd:MD_SpatialRepresentationTypeCode","spatialRepresentation",this.metadata.representationType)),a.appendChild(h),this.metadata.resolutions.forEach((function(t){if(t.value){var i=e.xmlDoc.createElement("gmd:spatialResolution"),n=e.xmlDoc.createElement("gmd:MD_Resolution");i.appendChild(n);var d=e.xmlDoc.createElement("gmd:distance");n.appendChild(d);var r=e.createNode("gco:Distance",t.value);r.setAttribute("uom",t.unit),d.appendChild(r),a.appendChild(i)}}));var p=this.xmlDoc.createElement("gmd:language");p.appendChild(e.createNodeCode("gmd:LanguageCode","language","fr"===this.metadata.lang?"fre":"eng",null)),a.appendChild(p);var g=this.xmlDoc.createElement("gmd:characterSet");g.appendChild(this.createNodeCode("gmd:MD_CharacterSetCode","charset","utf8")),a.appendChild(g);var u=this.xmlDoc.createElement("gmd:topicCategory");return u.appendChild(this.createNode("gmd:MD_TopicCategoryCode","geoscientificInformation")),a.appendChild(u),t},createNodeCode:function(e,t,a,i){if(i)var n=this.createNode(e,i);else n=this.xmlDoc.createElement(e);return n.setAttribute("codeList",this.codeLists[t]),n.setAttribute("codeListValue",a),n},createIdentifier:function(e){var t=this.xmlDoc.createElement("gmd:identifier"),a=this.xmlDoc.createElement("gmd:MD_Identifier");return t.appendChild(a),a.appendChild(this.createIncludeString("gmd:code",e,null,"en",["en"])),t},createDate:function(e,t){var a=this.xmlDoc.createElement("gmd:date"),i=this.xmlDoc.createElement("gmd:CI_Date");a.appendChild(i);var n=this.xmlDoc.createElement("gmd:date");return i.appendChild(n),n.appendChild(this.createNode("gco:Date",e)),n=this.xmlDoc.createElement("gmd:dateType"),i.appendChild(n),n.appendChild(this.createNodeCode("gmd:CI_DateTypeCode","dateType",t)),a},createContact:function(e){var t=this.xmlDoc.createElement("gmd:CI_ResponsibleParty");if("Personal"===e.nameType){var a=this.createIncludeString("gmd:individualName",e.fullName,e.identifier,this.metadata.mainLang,this.metadata.langs);t.appendChild(a)}if("Organizational"===e.nameType)var i={name:e.fullName,identifier:e.identifier};else e.affiliations.length>0&&(i=e.affiliations[0]);if(i){var n=this.createIncludeString("gmd:organisationName",i.name,i.identifier,this.metadata.mainLang,this.metadata.langs);t.appendChild(n)}if(e.email){var d=this.xmlDoc.createElement("gmd:contactInfo"),r=this.xmlDoc.createElement("gmd:CI_Contact");d.appendChild(r);var s=this.xmlDoc.createElement("gmd:address");r.appendChild(s);var o=this.xmlDoc.createElement("gmd:CI_Address");s.appendChild(o),o.appendChild(this.createIncludeString("gmd:electronicMailAddress",e.email,null,this.metadata.mainLang,this.metadata.langs)),t.appendChild(d)}var l=this.xmlDoc.createElement("gmd:role");return l.appendChild(this.createNodeCode("gmd:CI_RoleCode","role",e.role,"")),t.appendChild(l),t},createNeededString:function(e,t){var a=this.xmlDoc.createElement(e);return t?a.appendChild(this.createNode("gco:CharacterString",t)):(a.setAttribute("gco:nilReason","missing"),a.appendChild(this.xmlDoc.createElement("gco:CharacterString"))),a},createIncludeString:function(e,t,a,i,n){var d=this.xmlDoc.createElement(e),r={};if("string"==typeof t)r={fr:t,en:t};else for(var s in r=t,t)null===r[s]&&(r[s]="");if(a){var o=this.createNode("gmx:Anchor",r[i]);if("string"==typeof a)o.setAttribute("xlink:href",a);else if(a.identifier)switch(a.type){case"ORCID":o.setAttribute("xlink:href","https://orcid.org/"+a.identifier);break;case"ISNI":o.setAttribute("xlink:href","https://www.isni.org/"+a.identifier);break;case"ROR":o.setAttribute("xlink:href","https://ror.org/"+a.identifier)}else o=this.createNode("gco:CharacterString",r[i])}else o=this.createNode("gco:CharacterString",r[i]);if(d.appendChild(o),n.length>1){d.setAttribute("xsi:type","gmd:PT_FreeText_PropertyType");var l=this.xmlDoc.createElement("gmd:PT_FreeText"),c=this;n.forEach((function(e){var t=c.xmlDoc.createElement("gmd:textGroup"),a=c.createNode("gmd:LocalisedCharacterString",r[e]);a.setAttribute("locale","#"+e.toUpperCase()),t.appendChild(a),l.appendChild(t)})),d.appendChild(l)}return d},generateSubject:function(e){var t=[],a=this.metadata.langs;e.thesaurus&&(a=this.metadata.langs.filter((function(t){return e.thesaurus.langs.includes(t)})));var i=this;return a.forEach((function(a){if(e.title[a]){var n=i.createNode("subject",e.title[a]);n.setAttribute("xml:lang",a),e.thesaurus&&e.code&&(n.setAttribute("subjectScheme",e.thesaurus.name),n.setAttribute("schemeURI",e.thesaurus.schemeUrl),n.setAttribute("valueURI",e.thesaurus.valueRoot+e.code),n.setAttribute("classificationCode",e.code)),t.push(n)}})),t}}};a(2278);const s=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("span",[t("div",{staticClass:"header"},[t("h3",{staticStyle:{"margin-top":"0"}},[e._v("Format ISO19139")]),e._v(" "),e._m(0),e._v(" "),t("div",[e._v("\n      Fiche Générée "),t("input",{attrs:{type:"button",value:"Exporter"},on:{click:e.exportXML}})])]),e._v(" "),t("div",{staticClass:"xml-content"},[e.xmlDoc?t("view-xml",{attrs:{element:e.xmlDoc.documentElement,deployed:!1,depth:0}}):e._e()],1)])}),[function(){var e=this,t=e._self._c;return t("div",[e._v("\n    Pour plus d'information consultez la documentation \n    sur: \n    "),t("ul",{staticStyle:{margin:"5px 0 10px 0"}},[t("li",[t("a",{attrs:{href:"http://cnig.gouv.fr/wp-content/uploads/2019/05/Guide-de-saisie-des-%C3%A9l%C3%A9ments-de-m%C3%A9tadonn%C3%A9es-INSPIRE-v2.0.pdf",target:"_blank"}},[e._v("\n\t\t     Guide de saisie des métadonnées INSPIRE (CNIG)\n\t\t     ")])]),e._v(" "),t("li",[e._v("\n         ou "),t("a",{attrs:{href:"https://github.com/INSPIRE-MIF/technical-guidelines/blob/2022.1/metadata/metadata-iso19139/metadata-iso19139.adoc",target:"_blank"}},[e._v("\n         Technical Guidance for implementation of INSPIRE dataset and service metadata based on ISO/TS 19139:2007\n         ")])])])])}],!1,null,"b4075760",null).exports},2278:(e,t,a)=>{var i=a(7030);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals),(0,a(5346).Z)("1bcb4f04",i,!0,{})}}]);
//# sourceMappingURL=872.metadata-generator-vjs.js.map